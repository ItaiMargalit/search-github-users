{"ast":null,"code":"var _jsxFileName = \"/Users/itaimargalit/src/search-github-users/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [query, setQuery] = useState('');\n  const [users, setUsers] = useState([]);\n  const [error, setError] = useState(null);\n  const [totalUsers, setTotalUsers] = useState(0);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [nextPageLoading, setNextPageLoading] = useState(false);\n  const setStates = ({\n    loading = false,\n    users = [],\n    page = 1,\n    error = null,\n    totalUsers = 0\n  }) => {\n    setLoading(loading);\n    setUsers(users);\n    setPage(page);\n    setError(error);\n    setTotalUsers(totalUsers);\n  };\n  const handleSearch = async (reset = true) => {\n    try {\n      setStates({\n        loading: true\n      });\n      const response = await fetch(`https://localhost:7175/api/githubsearch/search_github_users?q=${encodeURIComponent(query)}&page=1&per_page=50`);\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status} ${response.statusText}`);\n      }\n      const data = await response.json();\n      setStates({\n        users: data.users || [],\n        totalUsers: data.total_count\n      });\n    } catch (err) {\n      console.error(\"Error fetching data:\", err);\n      setStates({\n        error: \"Error occured while fetching data\"\n      });\n    }\n  };\n  const loadNextPage = async () => {\n    try {\n      setNextPageLoading(true);\n      const nextPage = page + 1;\n      const response = await fetch(`https://localhost:7175/api/githubsearch/search_github_users?q=${encodeURIComponent(query)}&page=${nextPage}&per_page=50`);\n      if (response.ok) {\n        const data = await response.json();\n        setStates({\n          loading: true,\n          users: prevUsers => [...prevUsers, ...data.users],\n          page: nextPage,\n          totalUsers: data.total_count\n        });\n      }\n    } catch (err) {\n      console.error(\"Error loading next page:\", err);\n    } finally {\n      setNextPageLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (query) {\n      handleSearch();\n    }\n  }, [query]);\n  useEffect(() => {\n    const handleScroll = () => {\n      if (window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight - 100 && !nextPageLoading) {\n        loadNextPage();\n      }\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [nextPageLoading, page]);\n  useEffect(() => {\n    const delayDebounce = setTimeout(() => {\n      setQuery(inputValue);\n    }, 500);\n    return () => clearTimeout(delayDebounce);\n  }, [inputValue]);\n  const handleInputChange = e => {\n    setInputValue(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"GitHub Users Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"By Itai Margalit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"total-users\",\n      children: [\"Total Users: \", totalUsers]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-input-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search GitHub users...\",\n        value: inputValue,\n        onChange: handleInputChange,\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid-container\",\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => window.open(`https://github.com/${user.username}`, '_blank'),\n        className: \"user-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"badge\",\n          children: user.publicRepos\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this), user.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.image,\n          alt: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-picture\",\n          children: \"No Picture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"user-name\",\n          children: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }, this)]\n      }, user.username + user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading users...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"huW5FnRdaYamOD631gEpLSjxcI4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","inputValue","setInputValue","query","setQuery","users","setUsers","error","setError","totalUsers","setTotalUsers","page","setPage","loading","setLoading","nextPageLoading","setNextPageLoading","setStates","handleSearch","reset","response","fetch","encodeURIComponent","ok","Error","status","statusText","data","json","total_count","err","console","loadNextPage","nextPage","prevUsers","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","delayDebounce","setTimeout","clearTimeout","handleInputChange","e","target","value","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","style","color","map","user","onClick","open","username","publicRepos","image","src","alt","id","_c","$RefreshReg$"],"sources":["/Users/itaimargalit/src/search-github-users/src/App.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\n\nfunction App() {\n    const [inputValue, setInputValue] = useState('');\n    const [query, setQuery] = useState('');\n    const [users, setUsers] = useState([]);\n    const [error, setError] = useState(null);\n    const [totalUsers, setTotalUsers] = useState(0);\n    const [page, setPage] = useState(1);\n    const [loading, setLoading] = useState(false);\n    const [nextPageLoading, setNextPageLoading] = useState(false);\n\n    const setStates = ({loading = false, users = [], page = 1, error = null, totalUsers = 0}) => {\n        setLoading(loading);\n        setUsers(users);\n        setPage(page);\n        setError(error);\n        setTotalUsers(totalUsers);\n    };\n\n    const handleSearch = async (reset = true) => {\n        try {\n            setStates({loading: true});\n            const response = await fetch(`https://localhost:7175/api/githubsearch/search_github_users?q=${encodeURIComponent(query)}&page=1&per_page=50`,);\n            if (!response.ok) {\n                throw new Error(`Error: ${response.status} ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            setStates({users: data.users || [], totalUsers: data.total_count});\n\n        } catch (err) {\n            console.error(\"Error fetching data:\", err);\n            setStates({error: \"Error occured while fetching data\"});\n        }\n    };\n\n    const loadNextPage = async () => {\n        try {\n            setNextPageLoading(true);\n            const nextPage = page + 1;\n            const response = await fetch(`https://localhost:7175/api/githubsearch/search_github_users?q=${encodeURIComponent(query)}&page=${nextPage}&per_page=50`,);\n            if (response.ok) {\n                const data = await response.json();\n                setStates({\n                    loading: true,\n                    users: prevUsers => [...prevUsers, ...data.users],\n                    page: nextPage,\n                    totalUsers: data.total_count\n                })\n            }\n        } catch (err) {\n            console.error(\"Error loading next page:\", err);\n        } finally {\n            setNextPageLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        if (query) {\n            handleSearch();\n        }\n    }, [query]);\n\n    useEffect(() => {\n        const handleScroll = () => {\n            if (window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight - 100 && !nextPageLoading) {\n                loadNextPage();\n            }\n        };\n\n        window.addEventListener(\"scroll\", handleScroll);\n        return () => window.removeEventListener(\"scroll\", handleScroll);\n    }, [nextPageLoading, page]);\n\n    useEffect(() => {\n        const delayDebounce = setTimeout(() => {\n            setQuery(inputValue);\n        }, 500);\n\n        return () => clearTimeout(delayDebounce);\n    }, [inputValue]);\n\n    const handleInputChange = (e) => {\n        setInputValue(e.target.value);\n    };\n\n    return (\n        <div className=\"App\">\n            <h1>GitHub Users Search</h1>\n            <h2>By Itai Margalit</h2>\n\n            <p className=\"total-users\">Total Users: {totalUsers}</p>\n\n            <div className=\"search-input-container\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search GitHub users...\"\n                    value={inputValue}\n                    onChange={handleInputChange}\n                    className=\"search-input\"\n                />\n            </div>\n\n            {error && <p style={{color: 'red'}}>{error}</p>}\n\n            <div className=\"grid-container\">\n                {users.map((user) => (\n                    <div\n                        key={user.username + user.id}\n                        onClick={() => window.open(`https://github.com/${user.username}`, '_blank')}\n                        className=\"user-card\"\n                    >\n                        <div className=\"badge\">{user.publicRepos}</div>\n                        {user.image ? (\n                            <img src={user.image} alt={user.username}/>\n                        ) : (\n                            <div className=\"no-picture\">No Picture</div>\n                        )}\n                        <p className=\"user-name\">{user.username}</p>\n                    </div>\n                ))}\n            </div>\n\n            {loading && <p>Loading users...</p>}\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}